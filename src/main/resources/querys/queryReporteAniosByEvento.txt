SELECT 
    MONTHNAME(fecha_base.fecha) AS mes,
    CAST(MONTH(fecha_base.fecha) AS CHAR) AS mesNum,
    COALESCE(datos.numSolicitudes, 0) AS numSolicitudes,
    COALESCE(datos.monto, 0) AS monto,
    YEAR(fecha_base.fecha) AS anio
FROM (
    SELECT DISTINCT DATE(CONCAT(anio.y, '-', mes.m, '-01')) AS fecha
    FROM (SELECT $anioAnterior AS y UNION ALL SELECT $anioActual) anio
    CROSS JOIN (
        SELECT 1 AS m UNION ALL SELECT 2 UNION ALL SELECT 3 UNION ALL SELECT 4 
        UNION ALL SELECT 5 UNION ALL SELECT 6 UNION ALL SELECT 7 UNION ALL SELECT 8 
        UNION ALL SELECT 9 UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12
    ) mes
) AS fecha_base

LEFT JOIN (
    SELECT 
        YEAR(m.fecha) AS anio,
        MONTH(m.fecha) AS mes,
        COUNT(DISTINCT s.id_solicitud) AS numSolicitudes,
        SUM(m.monto) AS monto
    FROM movimiento m
    INNER JOIN solicitud s ON s.id_solicitud = m.id_solicitud
    INNER JOIN evento_solicitud e ON e.id_solicitud = s.id_solicitud
    WHERE 
        m.fecha >= '$anioAnterior-01-01' 
        AND m.fecha < '$anioActual-12-31'
        $eventoBuscar
    GROUP BY YEAR(m.fecha), MONTH(m.fecha)
) AS datos 
    ON YEAR(fecha_base.fecha) = datos.anio 
    AND MONTH(fecha_base.fecha) = datos.mes

ORDER BY anio DESC, MONTH(fecha_base.fecha) ASC;